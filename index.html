<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>ƒê·∫∑t h√†ng iPhone</title>
  <style>
    body { font-family: Arial; max-width: 400px; margin: 40px auto; }
    input, select, button {
      width: 100%; padding: 8px; margin-bottom: 10px;
    }
    button { cursor: pointer; }
  </style>
</head>
<body>

<h2>üì± ƒê·∫∑t h√†ng iPhone</h2>

<form id="orderForm">
  <input name="ten" placeholder="T√™n kh√°ch" required>
  <input name="sdt" placeholder="S·ªë ƒëi·ªán tho·∫°i" required>
  <input name="dia_chi" placeholder="ƒê·ªãa ch·ªâ" required>

  <select name="san_pham">
    <option value="iPhone 15 Pro">iPhone 15 Pro</option>
    <option value="iPhone 15">iPhone 15</option>
  </select>

  <input name="so_luong" type="number" value="1" min="1">

  <button type="submit">ƒê·∫∑t h√†ng</button>
</form>

<p id="result"></p>

<script>
  // ‚ö†Ô∏è B·∫ÆT BU·ªòC d√πng Production Webhook (UUID)
  const webhookUrl =
    "https://quyen123.app.n8n.cloud/webhook/4fe20500-e3fc-4d0d-9d5b-5d8fe4c1a33e";

  document.getElementById("orderForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const form = e.target;

    const payload = {
      ten: form.ten.value,
      sdt: form.sdt.value,
      dia_chi: form.dia_chi.value,
      san_pham: form.san_pham.value,
      so_luong: Number(form.so_luong.value),
      thoi_gian: new Date().toISOString()
    };

    try {
      const res = await fetch(webhookUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      if (!res.ok) {
        throw new Error("Webhook tr·∫£ v·ªÅ l·ªói");
      }

      document.getElementById("result").innerText =
        "‚úÖ ƒê·∫∑t h√†ng th√†nh c√¥ng!";

      form.reset();

    } catch (err) {
      document.getElementById("result").innerText =
        "‚ùå G·ª≠i ƒë∆°n th·∫•t b·∫°i ‚Äì ki·ªÉm tra webhook n8n";
      console.error(err);
    }
  });
</script>

</body>
</html>
